
# å¸•é‡‘æ£®æ‚£è€…è¼”åŠ©è£ç½®ç³»çµ±

## å°ˆæ¡ˆæ¦‚è¿°
æœ¬å°ˆæ¡ˆæ˜¯ä¸€å¥—åŸºæ–¼ Arduino Nano 33 BLE Sense Rev2 èˆ‡ CNN-LSTM æ·±åº¦å­¸ç¿’æ¨¡å‹çš„æ™ºèƒ½è¼”åŠ©è£ç½®ï¼Œç‚ºå¸•é‡‘æ£®æ‚£è€…æä¾›ç—‡ç‹€è©•ä¼°èˆ‡å€‹æ€§åŒ–åº·å¾©è¨“ç·´ã€‚

---

## ç‰¹è‰²åŠŸèƒ½

- **å¤šå‚³æ„Ÿå™¨æ•¸æ“šæ”¶é›†**  
  - æ‰‹æŒ‡å½æ›²åº¦ï¼ˆé›»ä½å™¨ï¼‰  
  - èªéŸ³
  - æ…£æ€§æ¸¬é‡ï¼ˆIMUï¼‰  
- **AI åˆ†æ**  
  - CNN-LSTM æ¨¡å‹å¯¦æ™‚è©•ä¼°å¸•é‡‘æ£®ç­‰ç´šï¼ˆ1-5 ç´šï¼‰  
- **å€‹æ€§åŒ–è¨“ç·´**  
  - æ ¹æ“šåˆ†æè‡ªå‹•ç”Ÿæˆåº·å¾©è¨ˆåŠƒ  
- **æ™ºèƒ½é˜»åŠ›æ§åˆ¶**  
  - èˆµæ©Ÿæ ¹æ“šç—‡ç‹€ç­‰ç´šå‹•æ…‹èª¿æ•´é˜»åŠ›  
- **å¯¦æ™‚é‚Šç·£æ¨ç†**  
  - ä½¿ç”¨ TensorFlow Liteï¼Œç„¡éœ€ç¶²è·¯é€£æ¥  

---

## æŠ€è¡“ç‰¹é»

- æ™ºèƒ½è¨­å‚™åµæ¸¬ï¼ˆè‡ªå‹•æª¢æŸ¥å‚³æ„Ÿå™¨é€£æ¥ï¼‰
- é«˜ç²¾åº¦ CNN-LSTM åˆ†æï¼ˆæº–ç¢ºç‡ > 85%ï¼‰
- 100ms æ¨ç†å»¶é²ï¼Œ5 ç§’åˆ†æä¸€æ¬¡
- å¤šé‡å®‰å…¨èˆ‡éåº¦è¨“ç·´ä¿è­·
- ä¸€éµæ“ä½œã€è‡ªå‹•æ ¡æº–ã€æ™ºèƒ½æç¤º

---

## å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ç³»çµ±ï¼ˆWindowsï¼‰
```bash
git clone https://github.com/ChakesWu/parkinson-assistance-device_v2.0.git
cd parkinson-assistance-device
install.bat
```

### 2. ç¡¬é«”é€£æ¥
- A0-A4ï¼šæ‰‹æŒ‡é›»ä½å™¨ï¼ˆå¯é¸ï¼‰
- A5ï¼šEMG å‚³æ„Ÿå™¨ï¼ˆå¯é¸ï¼‰
- D9ï¼šè¨“ç·´èˆµæ©Ÿ
- D4ï¼šæ“ä½œæŒ‰éˆ•
- USBï¼šé›»æºèˆ‡é€šè¨Š

### 3. ä¸Šå‚³ Arduino ç¨‹å¼
1. é–‹å•Ÿ Arduino IDE
2. å®‰è£ `Arduino_BMI270_BMM150`ã€`Servo` ç­‰åº«
3. ä¸Šå‚³ `arduino/main/complete_parkinson_device.ino`

### 4. å•Ÿå‹•ç³»çµ±
- æŒ‰ç¡¬é«”æŒ‰éˆ•é–‹å§‹åˆ†æ  
- æˆ–åŸ·è¡Œ Python æ§åˆ¶ç¨‹å¼ï¼š
```bash
python python/deployment/system_integration.py
```

---

## å°ˆæ¡ˆçµæ§‹

```text
parkinson-assistance-device/
â”œâ”€â”€ arduino/                 # Arduino åµŒå…¥å¼ç¨‹å¼
â”‚   â”œâ”€â”€ main/                # ä¸»ç¨‹å¼
â”‚   â”‚   â”œâ”€â”€ complete_parkinson_device.ino
â”‚   â”‚   â””â”€â”€ parkinsons_device.ino
â”‚   â”œâ”€â”€ libraries/           # è‡ªè¨‚åº«
â”‚   â”‚   â”œâ”€â”€ TensorFlowLite_Inference.h
â”‚   â”‚   â””â”€â”€ model_data.h
â”‚   â””â”€â”€ examples/            # ç¯„ä¾‹/æ¸¬è©¦
â”œâ”€â”€ python/                  # Python å¾Œç«¯
â”‚   â”œâ”€â”€ data_collection/
â”‚   â”‚   â””â”€â”€ arduino_collector.py
â”‚   â”œâ”€â”€ machine_learning/
â”‚   â”‚   â””â”€â”€ cnn_lstm_model.py
â”‚   â”œâ”€â”€ analysis/
â”‚   â”‚   â””â”€â”€ parkinson_analyzer.py
â”‚   â””â”€â”€ deployment/
â”‚       â”œâ”€â”€ model_quantization.py
â”‚       â””â”€â”€ system_integration.py
â”œâ”€â”€ models/                  # è¨“ç·´æ¨¡å‹
â”œâ”€â”€ data/                    # æ•¸æ“šå­˜å„²
â”œâ”€â”€ docs/                    # æ–‡æª”
â”‚   â”œâ”€â”€ system_architecture.md
â”‚   â”œâ”€â”€ user_manual.md
â”‚   â””â”€â”€ deployment_guide.md
â”œâ”€â”€ requirements.txt         # Python ä¾è³´
â”œâ”€â”€ setup.py                 # å®‰è£è…³æœ¬
â”œâ”€â”€ install.bat              # Windows å®‰è£
â””â”€â”€ README.md                # èªªæ˜æ–‡ä»¶
```

---

## æ ¸å¿ƒæŠ€è¡“

### CNN-LSTM æ··åˆæ¨¡å‹
- **è¼¸å…¥**ï¼š50Ã—9 æ™‚é–“åºåˆ—ï¼ˆ5æ‰‹æŒ‡ + 1EMG + 3IMUï¼‰
- **CNN**ï¼š1D å·ç©æå–ç©ºé–“ç‰¹å¾µ
- **LSTM**ï¼šå»ºæ¨¡æ™‚é–“åºåˆ—
- **æ³¨æ„åŠ›æ©Ÿåˆ¶**ï¼šå¼·åŒ–é—œéµç‰¹å¾µ
- **è¼¸å‡º**ï¼šå¸•é‡‘æ£®åˆ†ç´šï¼ˆ1-5 ç´šï¼‰+ ç½®ä¿¡åº¦

### é‡åŒ–éƒ¨ç½²
- TensorFlow Lite INT8 é‡åŒ–ï¼Œæ¨¡å‹ < 60KB
- Arduino Nano 33 BLE Sense é‹è¡Œ
- <100ms æ¨ç†ã€5 ç§’åˆ†æé€±æœŸ

### å€‹æ€§åŒ–è¨“ç·´
- 1-5 ç´šå°æ‡‰ 30-150 åº¦é˜»åŠ›
- ç¶œåˆè©•ä¼°éœ‡é¡«ã€å”èª¿ã€è‚ŒåŠ›ã€å¹³è¡¡
- æ”¯æ´ç·Šæ€¥åœæ­¢ä¿è­·

---

## ä½¿ç”¨æŒ‡å—

### æŒ‰éˆ•èˆ‡ä¸²å£å‘½ä»¤

- **ç¡¬é«”æŒ‰éˆ•**  
  - çŸ­æŒ‰ï¼šé–‹å§‹/åœæ­¢åˆ†æ  
  - é•·æŒ‰ï¼šç·Šæ€¥åœæ­¢

- **ä¸²å£å‘½ä»¤ï¼ˆ9600 æ³¢ç‰¹ç‡ï¼‰**  
  - `START`ï¼šé–‹å§‹æ•¸æ“šæ”¶é›†  
  - `TRAIN`ï¼šé–‹å§‹è¨“ç·´  
  - `CALIBRATE`ï¼šé‡æ–°æ ¡æº–  
  - `STATUS`ï¼šæŸ¥è©¢ç‹€æ…‹  
  - `SERVO,90`ï¼šè¨­èˆµæ©Ÿè§’åº¦  
  - `STOP`ï¼šåœæ­¢æ“ä½œ

### å·¥ä½œæµç¨‹

1. ç³»çµ±å•Ÿå‹•èˆ‡è‡ªæª¢
2. è‡ªå‹•åŸºç·šæ ¡æº–ï¼ˆ2ç§’ï¼‰
3. å¯¦æ™‚åˆ†æï¼ˆæ¯5ç§’1æ¬¡AIè©•ä¼°ï¼‰
4. çµæœè¼¸å‡ºï¼ˆåˆ†ç´šã€ä¿¡å¿ƒåº¦ã€è¨“ç·´å»ºè­°ï¼‰
5. å€‹æ€§åŒ–è¨“ç·´ï¼ˆè‡ªå‹•èª¿æ•´é˜»åŠ›ã€å¾ªç’°è¨“ç·´ï¼‰

#### åˆ†æçµæœç¯„ä¾‹
```
=== AIåˆ†æçµæœ ===
å¸•é‡‘æ£®ç­‰ç´š: 3 (ä¸­åº¦ç—‡ç‹€)
ç½®ä¿¡åº¦: 87.5%
ç—‡ç‹€åˆ†æ:
  æ‰‹æŒ‡éˆæ´»æ€§: 0.342
  å”èª¿æ€§: 0.678
  éœ‡é¡«æŒ‡æ•¸: 0.234
è¨“ç·´å»ºè­°: é‡é»æ”¹å–„ç²¾ç´°å‹•ä½œæ§åˆ¶ï¼Œèˆµæ©Ÿé˜»åŠ›è¨­å®š90åº¦
å»ºè­°è¨“ç·´é »ç‡: æ¯æ—¥3æ¬¡ï¼Œæ¯æ¬¡25-30åˆ†é˜
==================
```

---

## å®‰è£èˆ‡éƒ¨ç½²

### ç’°å¢ƒéœ€æ±‚
- Arduino IDE 1.8.19+
- Python 3.8+
- TensorFlow 2.10+
- Arduino Nano 33 BLE Sense Rev2

### å®‰è£æ­¥é©Ÿ

```bash
# 1. å®‰è£ Python ä¾è³´
pip install -r requirements.txt

# 2. å®‰è£ç³»çµ±åŒ…
pip install -e .

# 3. ä¸Šå‚³ Arduino ç¨‹å¼
# ç”¨ Arduino IDE ä¸Šå‚³ complete_parkinson_device.ino

# 4. é‹è¡Œç³»çµ±æ•´åˆ
python python/deployment/system_integration.py
```

### æ¨¡å‹è¨“ç·´æµç¨‹

```bash
# 1. æ”¶é›†è¨“ç·´æ•¸æ“š
python -c "from python.data_collection.arduino_collector import *; main()"

# 2. è¨“ç·´ CNN-LSTM æ¨¡å‹
python -c "from python.machine_learning.cnn_lstm_model import *; main()"

# 3. é‡åŒ–èˆ‡éƒ¨ç½²
python -c "from python.deployment.model_quantization import *; main()"
```

---

## æ–‡ä»¶èˆ‡æ”¯æ´

- ğŸ“– [ç³»çµ±æ¶æ§‹èªªæ˜](docs/system_architecture.md)
- ğŸ“‹ [ç”¨æˆ¶ä½¿ç”¨æ‰‹å†Š](docs/user_manual.md)
- ğŸ”§ [éƒ¨ç½²é…ç½®æŒ‡å—](docs/deployment_guide.md)

**æŠ€è¡“æ”¯æ´**  
- ç¡¬é«”å•é¡Œï¼šæª¢æŸ¥é€£æ¥/é›»æº  
- è»Ÿé«”å•é¡Œï¼šæª¢æŸ¥ä¸²å£è¼¸å‡ºèˆ‡æ—¥èªŒ  
- æ¨¡å‹å•é¡Œï¼šé‡æ–°è¨“ç·´æˆ–ç”¨é è¨“ç·´æ¨¡å‹

---

## å®‰å…¨èˆ‡éš±ç§

- é˜»åŠ›è¨“ç·´è«‹åœ¨å°ˆæ¥­æŒ‡å°ä¸‹é€²è¡Œ
- æ„Ÿåˆ°ä¸é©è«‹ç«‹å³åœæ­¢
- ç¶“å¸¸æ ¡æº–ï¼Œç¢ºä¿æº–ç¢ºæ€§
- æ•¸æ“šåƒ…æœ¬åœ°è™•ç†ï¼Œç„¡é›²ç«¯ä¸Šå‚³
- ç”¨æˆ¶æ•¸æ“šå®Œå…¨è‡ªä¸»ç®¡ç†
- ç¬¦åˆé†«ç™‚æ•¸æ“šéš±ç§è¦ç¯„

---

## è²¢ç»æ–¹å¼èˆ‡æˆæ¬Š

1. Fork æœ¬å€‰åº«
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç¢¼
4. ç™¼èµ· Pull Request

å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šï¼Œè©³è¦‹ LICENSEã€‚

---

> **é‡è¦æé†’ï¼šæœ¬è£ç½®åƒ…ä½œè¼”åŠ©è©•ä¼°èˆ‡è¨“ç·´ï¼Œä¸èƒ½å–ä»£å°ˆæ¥­é†«ç™‚è¨ºæ–·ã€‚ä½¿ç”¨å‰è«‹è«®è©¢é†«ç™‚å°ˆæ¥­äººå“¡ã€‚**




