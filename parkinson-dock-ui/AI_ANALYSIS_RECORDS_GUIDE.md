# AI分析記錄系統使用指南

## 概述

AI分析記錄系統是帕金森輔助裝置的核心功能之一，能夠準確記錄每次AI分析的結果，並提供完整的數據管理功能。

## 功能特點

### 🔍 自動記錄
- **Arduino設備分析**：當Arduino設備完成AI分析時，系統會自動解析並保存分析結果
- **網頁端分析**：在AI分析頁面進行的10秒採集分析會自動保存記錄
- **實時同步**：所有分析結果實時保存到本地存儲

### 📊 數據統計
- **總分析次數**：顯示累計進行的分析次數
- **平均等級**：計算所有分析的平均帕金森等級
- **平均置信度**：顯示AI模型的平均預測置信度
- **趨勢分析**：比較最近5次和之前5次的分析結果，顯示改善/穩定/惡化趨勢

### 🗂️ 記錄管理
- **篩選功能**：按帕金森等級篩選記錄
- **刪除記錄**：可以刪除單條記錄或清空所有記錄
- **導出功能**：將記錄導出為JSON格式文件
- **導入功能**：從JSON文件導入記錄數據

## 使用方法

### 1. 查看記錄
1. 訪問 `http://localhost:3000/records` 頁面
2. 查看統計信息卡片了解整體情況
3. 瀏覽記錄列表查看詳細分析結果

### 2. 進行AI分析
#### 方法一：使用Arduino設備
1. 在 `/device` 頁面連接Arduino設備
2. 設備會自動進行AI分析
3. 分析完成後記錄會自動保存並顯示在records頁面

#### 方法二：使用網頁分析
1. 在 `/ai-analysis` 頁面點擊"開始10秒採集與分析"
2. 等待採集和分析完成
3. 分析結果會自動保存到記錄中

### 3. 管理記錄
#### 篩選記錄
- 使用篩選下拉菜單按帕金森等級篩選記錄
- 選擇"所有等級"顯示全部記錄

#### 導出記錄
1. 點擊"導出記錄"按鈕
2. 系統會下載包含所有記錄的JSON文件
3. 文件名格式：`parkinson_analysis_records_YYYY-MM-DD.json`

#### 導入記錄
1. 點擊"導入記錄"按鈕
2. 選擇之前導出的JSON文件
3. 系統會自動導入記錄並避免重複

#### 刪除記錄
- **刪除單條記錄**：點擊記錄右上角的垃圾桶圖標
- **清空所有記錄**：點擊"清空記錄"按鈕（需要確認）

### 4. 創建測試數據
如果沒有任何記錄，可以點擊"創建示例記錄"按鈕生成一些測試數據來體驗系統功能。

## 數據結構

### 分析記錄包含的信息
- **基本信息**：分析次數、時間戳、數據來源
- **AI分析結果**：帕金森等級、置信度、建議阻力設定
- **傳感器數據**：手指彎曲度、加速度計、陀螺儀、EMG數據
- **詳細分析**：震顫頻率、抓握質量、EMG RMS值等
- **訓練建議**：個性化的訓練建議文本

### 帕金森等級說明
- **0級**：正常
- **1級**：輕微症狀
- **2級**：輕度症狀
- **3級**：中度症狀
- **4級**：重度症狀
- **5級**：嚴重症狀

## 技術特點

### 數據存儲
- 使用瀏覽器的localStorage進行本地存儲
- 最多保存1000條記錄（自動清理舊記錄）
- 數據格式為JSON，便於導出和分析

### 數據安全
- 所有數據保存在本地，不會上傳到服務器
- 支持數據導出備份
- 提供數據導入恢復功能

### 性能優化
- 實時更新統計信息
- 高效的數據篩選和排序
- 平滑的用戶界面動畫

## 故障排除

### 常見問題

**問題：記錄沒有自動保存**
- 確認瀏覽器支持localStorage
- 檢查瀏覽器存儲空間是否充足
- 確認AI分析已完成

**問題：統計信息不正確**
- 刷新頁面重新加載數據
- 檢查是否有篩選條件影響統計

**問題：導入記錄失敗**
- 確認文件格式為JSON
- 檢查文件是否由系統導出
- 查看錯誤信息了解具體問題

**問題：Arduino分析結果沒有記錄**
- 確認Arduino設備正確連接
- 檢查串口數據是否包含完整的AI分析結果
- 確認分析結果格式符合解析要求

## 更新日誌

### v1.0.0
- 實現基本的記錄保存和顯示功能
- 添加統計信息展示
- 支持記錄篩選和管理
- 實現導出/導入功能
- 集成Arduino和網頁端分析結果自動保存

## 技術支持

如果遇到問題或需要技術支持，請檢查：
1. 瀏覽器控制台是否有錯誤信息
2. 網絡連接是否正常
3. Arduino設備是否正確連接
4. 數據格式是否符合要求

系統會在控制台輸出詳細的調試信息，有助於問題診斷。
